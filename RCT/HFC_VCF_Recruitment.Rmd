---
title: "HFC_VCF_Recruitment"
author: "Jonathan Karl"
date: '2023-09-13'
output: html_document
---

```{r}
rm(list = ls())

# Prevent scientific notation
knitr::opts_knit$set(options(scipen=999))

# Install and load all the packages that will be used for analysis
pkgs <- c("tidyverse", "googlesheets4")

miss_pkgs <- pkgs[!pkgs %in% installed.packages()[,1]] # vector of missing packages
if(length(miss_pkgs)>0){
  install.packages(miss_pkgs)
}
invisible(lapply(pkgs,library,character.only=TRUE))

# Clear our memory by removing objects that are no longer needed.
rm(miss_pkgs, pkgs)
```

# Helper Functions

```{r}
tblFun <- function(x){
  tbl <- table(x)
  res <- cbind(tbl,round(prop.table(tbl)*100,2))
  colnames(res) <- c('Count','Percentage')
  res
}

tblFun_II <- function(x, y){
  tbl <- table(x, y)
  res <- apply(tbl, MARGIN = 2, FUN = function(x) round(prop.table(x)*100,2))
  res
}

```

# Participants

## TEMP - Lab Pilots

```{r}
caregivers_data <- read_sheet("https://docs.google.com/spreadsheets/d/1Kyi1j640g6pliUC_XtewQnr4ZHySKp46S9p2JGqgpyg/edit#gid=84028558", sheet = "Recruited respondents")

apply(caregivers_data[,c("County_ residency", "How old are you?\n 18>", "Do you have daughter/s\n  5-18 yrs?", "Do you have a operational smartphone?",  "Do you have a facebook account?", "Eligible?")], FUN = tblFun, MARGIN = 2)

tblFun_II(caregivers_data$`County_ residency`, caregivers_data$Subcounty)
```

## Read Data

```{r}

#caregivers_data <- read.csv("Raw Data/VCF2_RCT_Recruitment_Caregivers.csv")

```

1. Base Checks
- Do participants match the recruitment criteria?
- Does each completed survey have a surveyID?
- Are there any programming bugs (e.g., response scale recorded incorrectly, skip logic flaws, all NAs, etc.)?
- Use of Specify other too much?
- Breakdown of Demographics (check for imbalances) - by FO

2. Duplicates & Fraud
- Are we confident that each completed survey corresponds to a unique participant? If so, are all survey ID and phone number pairings unique?
- Arbitrary responses? (baseline only)
- Are there high rates of missing data (e.g., Don't Know, Refuse to Respond) for key variables? - by FO
- Is there evidence of fake data? (how long did surveys take) - by FO

2. Tracking recruitment
- Keep track of recruitment progress to cross-check with Isaacs tracking (and vice versa)
- Forecast recruitment timeline
- Are the recorded geolocations of the recruitments located within clusters?

4. By FO
- Recruits
- Duration distribution of recruitment survey
- Breakdown of Demographics (check for imbalances)
- Outliers, “don’t know” patterns, + time's taken to respond

```{r}

```

# Hairdressers
Keep track of recruitment progress to cross-check with Isaacs tracking (and vice versa)
Forecast recruitment timeline
What are the geolocations of the hairdressers?

How many per FO
-Recruits
-Duration distribution of recruitment survey
-Breakdown of Demographics (check for imbalances)
-Outliers, “don’t know” patterns, + tbd
-Match with Hairdressers (who is (not) ineligible). What is the rate of ineligibility?

```{r}

```

# Matching

- Plan for tracking match between hairdresser<>participant (also export to Gsheets so that Isaac can mark which participant whose hairdresser rejected has been informed)
- By FO --> Match with Hairdressers (who is (not) ineligible). What is the rate of ineligibility?

```{r}

```

